% ------------------------------------------------------------------------
% LaTeX - Preambel  ******************************************************
% ------------------------------------------------------------------------
% von: Matthias Pospiech
% ========================================================================

% Strukturierung dieser Praeambel:
%    1.  Pakete die vor anderen geladen werden müssen
%        (calc, babel, xcolor, graphicx, amsmath, pst-pdf, ragged2e, ...)
%    2.  Schriften
%    3.  Mathematik (mathtools, fixmath, onlyamsmath, braket,
%        cancel, empheq, exscale, icomma, ...)
%    4.  Tabellen (booktabs, multirow, dcolumn, tabularx, ltxtable, supertabular)
%    5.  Text
%        5.1 Auszeichnungen (ulem, soul, url)
%        5.2 Fussnoten (footmisc)
%        5.3 Verweise (varioref)
%        5.4 Listen (enumitem, paralist, declist)
%    6.  Zitieren (csquotes, jurabib, natbib)
%    7.  PDF (microtype, hyperref, backref, hypcap, pdfpages
%    8.  Graphiken (float, flafter, placeins, subfig, wrapfig,
%        floatflt, picins, psfrag, sidecap, pict2e, curve2e)
%    9.  Sonstiges (makeidx, isodate, numprint, nomencl, acronym)
%    10. Verbatim (upquote, verbatim, fancyvrb, listings, examplep)
%    11. Wissenschaft (units)
%    12. Fancy Stuff
%    13. Layout
%       13.1.  Diverse Pakete und Einstellungen (multicol, ellipsis)
%       13.2.  Zeilenabstand (setspace)
%       13.3.  Seitenlayout (typearea, geometry)
%       13.4.  Farben
%       13.5.  Aussehen der URLS
%       13.6.  Kopf und Fusszeilen (scrpage2)
%       13.7.  Fussnoten
%       13.8.  Schriften (Sections )
%       13.9.  UeberSchriften (Chapter und Sections) (titlesec, indentfirst)
%       13.10. Captions (Schrift, Aussehen)
%              (caption, subfig, capt-of, mcaption, tocloft, multitoc, minitoc)
%    14.  Auszufuehrende Befehle


% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% Einige Pakete muessen unbedingt vor allen anderen geladen werden
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%\input{preambel/preambel-commands}

%There are two packages that may be used for preventing "no room for a new \write" error,
% which occurs if too many external (intermediate) files need to be written simultaneously
%(table of contents, glossary, list of figures, abbreviations, acronyms, todos, etc.)
%the morewrites package caused a problem after an update in March 2017
%alternatively use scrwfile
%% PW: Macht in Zukunft "room for a new \write"
%% braucht l3kernel
%\usepackage{morewrites}
\usepackage{scrwfile}

%% PW: Tip von H Oberdiek: Volle Ausgabe der Fehlermeldungen
\errorcontextlines=\maxdimen


%% PW: Tip von H. Oberdiek:
%% Zählerwert und \thepage auf jeder Seite protokollieren lassen
\usepackage{atbegshi}
\AtBeginShipout{\typeout{* Page \the\value{page} (\thepage)}}

%
%
%%% Doc: www.cs.brown.edu/system/software/latex/doc/calc.pdf
% Calculation with LaTeX
\usepackage{calc}


%% PW: Befehle mit mehr als einem optionalen Argument. 
\usepackage{xargs}


%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/required/babel/babel.pdf
% Language setting.
% Main document language is listed at last
\ifthenelse{\boolean{englishAsMainLanguage}}%
{\usepackage[ngerman,english]{babel}}%
{\usepackage[english,ngerman]{babel}}

% The \babelhyphenation macro has been introduced
% only in the babel v.3.9 released in March 2013.
% For the sake of compatibility with older TeX distribution:
\providecommand{\babelhyphenation}[2][english]{%
\begin{hyphenrules}{#1}
\hyphenation{#2}
\end{hyphenrules}
}

%for allowing hyphenation of words that contain a dash
%using shortcuts \-/, \=/, \--, \==, \---, and \===
\usepackage[shortcuts]{extdash}

%Zur besseren Silbentrennung
%s. http://de.wikibooks.org/wiki/LaTeX-W%C3%B6rterbuch:_Silbentrennung
\usepackage[ngerman=ngerman-x-latest]{hyphsubst}

%% Paket zur Abfrage der aktuellen Sprache
\usepackage{iflang}


%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/required/graphics/grfguide.pdf
% Bilder
\usepackage[%
	%final,
	%draft, % do not include images (faster)
	%pdftex, %für asymptote  %% sorgt für PDF mode expected, but DVI mode detected!!!!! Keinen Treiber auswählen bei graphicx, sonst geht pstool nicht mehr!!!!!
]{graphicx}
% Nachfolgendes ausgelegert in eine Extra-Datei
% Achtung: Es gibt keine Warnung, falls Pfade an mehreren Stellen gesetzt werden!
%\graphicspath{\MyImagePathes}
%\DeclareGraphicsExtensions{\MyImageExtensions}

%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/oberdiek/epstopdf.pdf
%% If an eps image is detected, epstopdf is automatically called to convert it to pdf format.
%% Requires: graphicx loaded

\usepackage{ifplatform}

%%%PW: Tip von H. Oberdiek
\usepackage{ltxcmds}%[2010/04/26]
\makeatletter
\let\HashChar\ltx@hashchar
\makeatother

%%%PW: Tip von H. Oberdiek
%\begingroup
  %\catcode`\#=12 %
%\edef\x{\endgroup
  %\noexpand\newcommand*{\noexpand\HashChar}{#}%
%}\x

\ifxetex
	%bei Verwendung von XeLaTeX nicht verwenden, da nicht kompatibel
\else
	\usepackage{epstopdf}

\epstopdfDeclareGraphicsRule{.eps}{pdf}{.pdf}{%
  ps2pdf %
  -dEPSCrop %
	-dAutoRotatePages\HashChar /None %
  -dPDFSETTINGS\HashChar /prepress %
  -dCompatibilityLevel\HashChar 1.3 %
	-dEmbedAllFonts\HashChar true %
	-dSubsetFonts\HashChar true
  #1 \OutputFile
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\fi

%MG: vorverschoben, da bereits in marginnote verwendet
%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/ms/ragged2e.pdf
% Besserer Flatternsatz (Linksbuendig, statt Blocksatz)
\usepackage{ragged2e}


%% Doc: ftp://tug.ctan.org/pub/tex-archive/graphics/pstricks/README
%% Im Beispiel auf der Homepage vor auto-pst-pdf
% load before graphicx
 %\usepackage{pstricks}  %%Funktioniert nicht zusammen mit pstool, weil pstool nur Unterstützung für psfrag bietet.
 %\usepackage{pst-plot, pst-node, pst-coil, pst-eps}


%%% Doc: http://www.ctan.org/tex-archive/macros/latex/contrib/pst-pdf/pst-pdf-DE.pdf
% Used to automatically integrate eps graphics in an pdf document using pdflatex.
% Requires ps4pdf macro !!!
% Download macro from http://www.ctan.org/tex-archive/macros/latex/contrib/pst-pdf/scripts/

%\usepackage[%
%   %active,       % Aktiviert den Extraktionsmodus (DVI-Ausgabe). Die explizite Angabe ist
%                  % normalerweise unnötig (Standard im LATEX-Modus).
%   %inactive,     % Das Paket wird deaktiviert, Zuätzlich werden die Pakete pstricks und
%                  % graphicx geladen
%   nopstricks,    % Das Paket pstricks wird nicht geladen.
%   %draft,        % Im pdfLATEX-Modus werden aus der Containerdatei eingefügte Grafiken nur
%                  % als Rahmen dargestellt.
%   %final,        % Im pdfLATEX-Modus werden aus der Containerdatei eingefügte Grafiken
%                  % vollständig dargestellt (Standard).
%   %tightpage,    % Die Abmessung Grafiken in der Containerdatei entsprechen denen der
%                  % zugehörigen TEX-Boxen (Standard).
%   %notightpage,  % die Grafiken in der Containerdatei nehmen
%                  % mindestens die Größe des gesamten Blattes einnehmen.
%   %displaymath,  % Es werden zusätzlich die mathematischen Umgebungen displaymath,
%                  % eqnarray und $$ extrahiert und im pdf-Modus als Grafik eingefügt.
%]{pst-pdf}

%% Geht zusammen mit pstricks, aber nicht zusammen mit pstool. Also entweder auto-pst-pdf oder pstool.
%\usepackage[
%	on,
%%	crop=off,
%	crop=on,
%%	cleanup={log,aux,dvi,ps,pdf},
%]{auto-pst-pdf}
%%
% Notwendiger Bugfix für natbib Paket bei Benutzung von pst-pdf (Version <= v1.1o)
\IfPackageLoaded{pst-pdf}{
   \providecommand\makeindex{}
   \providecommand\makeglossary{}
}{}


% This package implements a workaround for the LaTeX bug that marginpars
% sometimes appear on the wrong margin.
%% PW: Hilft auch nicht
\usepackage{mparhack}
% in some case this causes an error in the index together with package pdfpages
% the reason is unkown. Therefore I recommend to use the margins of marginnote

%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/marginnote/marginnote.pdf
% Summary description: marginnote allows margin note, where \marginpar fails
\usepackage{marginnote}
\IfPackageLoaded{marginnote}{%
\renewcommand*{\raggedleftmarginnote}{\RaggedRight}
\renewcommand*{\raggedrightmarginnote}{\RaggedRight}
%\renewcommand*{\marginfont}{\color{gray}\sffamily\scshape}% serifenlos, mit Kapitälchen
\renewcommand*{\marginfont}{\color{gray}}% ohne Kapitälchen
}


%% Doc: (inside relsize.sty )
%% ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/misc/relsize.sty
%  Set the font size relative to the current font size
\usepackage{relsize}

%% MG: Vorverschoben, da bereits in marginnote verwendet
%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/ms/ragged2e.pdf
%% Besserer Flatternsatz (Linksbuendig, statt Blocksatz)
%\usepackage{ragged2e}

%%PW: Markus Kohms gridset zum registerhaltigen Satz. (Zeilen der Vorderseite matchen die Zeilen der Rückseite wenn man es gegen das Licht hält)
%% Man muss händisch an die Absätze \vskipnextgrid setzen und für jedes \vskipnextgrid braucht man (mehr od. weniger) einen extra-Durchlauf von pdfLaTeX :-(
%\usepackage{gridset}

% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% Tables (Tabular)
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

% Basispaket fuer alle Tabellenfunktionen
% -> wird automatisch durch andere Pakete geladen
% \usepackage{array}
%
% bessere Abstaende innerhalb der Tabelle (Layout))
% -------------------------------------------------
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/booktabs/booktabs.pdf
\usepackage{booktabs}
%
% Farbige Tabellen
% ----------------
% Das Paket colortbl wird inzwischen automatisch durch xcolor geladen
%
% Erweiterte Funktionen innerhalb von Tabellen
% --------------------------------------------
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/multirow/multirow.sty
\usepackage{multirow} % Mehrfachspalten
%
%%% Doc: Documentation inside dtx Package
\usepackage{dcolumn}  % Ausrichtung an Komma oder Punkt

\usepackage{tabulary}

%%% Neue Tabellen-Umgebungen:
% ---------------------------
% Spalten automatischer Breite:
%%% Doc: Documentation inside dtx Package
% \usepackage{tabularx}
% -> nach hyperref Laden
% -> wird von ltxtable geladen
% \LoadPackageLater{tabularx}


% Tabellen ueber mehere Seiten
% ----------------------------
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/carlisle/ltxtable.pdf
% \usepackage{ltxtable} % Longtable + tabularx
                        % (multi-page tables) + (auto-sized columns in a fixed width table)
% -> nach hyperref laden
\LoadPackageLater{ltxtable}

%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/supertabular/supertabular.pdf
%\usepackage{supertabular}



% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% text related packages
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

%%% Textverzierungen/Auszeichnungen ======================================
%
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/misc/ulem.sty
\usepackage[normalem]{ulem}      % Zum Unterstreichen
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/soul/soul.pdf
\usepackage{soul}		            % Unterstreichen, Sperren
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/misc/url.sty
\usepackage[hyphens]{url} % Setzen von URLs. In Verbindung mit hyperref sind diese auch aktive Links.

%%PW:  Textpos Erlaubt absolute Positionierung. Für Titelseite.
%%%%Beispiel:
%%%%\begin{textblock}{8}(10.8,0.2)
%%%%\includegraphics[width=8cm]{bild}
%%%%\end{textblock}
%%%%Dazu muss \usepackage[absolute]{textpos} eingebunden werden.
%%%%Die erste Zahl gibt die Breite des Textblocks an (wird für Bilder NICHT!!! ignoriert, legt die Bildbreite fest), die
%%%%zweite den Abstand zum linken und die dritte den Abstand zum oberen Seitenrand.
\usepackage[%
absolute,%
%showboxes,%   %Hilft gewaltig beim Verständnis!
%overlay,%
verbose,
]{textpos}  %% Definiert \begin{textblock}{hsize}(hpos,vpos)
\setlength{\TPHorizModule}{10mm}
\setlength{\TPVertModule}{\TPHorizModule}
\textblockorigin{0mm}{0mm} % start everything near the top-left corner

%\usepackage{eso-pic}  %% absolute Bildpositionierung


%%% Fussnoten/Endnoten ===================================================
%
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/footmisc/footmisc.pdf
%
\usepackage[%
   bottom,      % Footnotes appear always on bottom. This is necessary
                % especially when floats are used
   stable,      % Make footnotes stable in section titles
   perpage,     % Reset on each page
   %para,       % Place footnotes side by side of in one paragraph.
   %side,       % Place footnotes in the margin
   ragged,      % Use RaggedRight
   %norule,     % suppress rule above footnotes
   multiple    % rearrange multiple footnotes intelligent in the text.
   %symbol,     % use symbols instead of numbers
]{footmisc}

\renewcommand*{\multfootsep}{,\nobreakspace}

%%Das passiert weiter unten nochmal, daher hier auskommentiert
%\deffootnote%
%   [1em]% width of marker
%   {1.5em}% indentation (general)
%   {1em}% indentation (par)
%   {\textsubscript{\thefootnotemark}}%


%% Einruecken der Fussnote einstellen
%\setlength\footnotemargin{10pt}

%--- footnote counter documentweit durchlaufend ------------------------------
%\usepackage{chngcntr}
%\counterwithout{footnote}{chapter}
%-----------------------------------------------------------------------------

%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/misc/endnotes.sty
%\usepackage{endnotes}
% From the Documentation:
% To turn all the footnotes in your documents into endnotes, say
%
%     \let\footnote=\endnote
%
%  in your preamble, and then add something like
%
%     \newpage
%     \begingroup
%     \parindent 0pt
%     \parskip 2ex
%     \def\enotesize{\normalsize}
%     \theendnotes
%     \endgroup
%
% as the last thing in your document.  (But \theendnotes all
% by itself will work.)

%%% Verweise =============================================================
%
%%% Doc: Documentation inside dtx File
\ifthenelse{\boolean{englishAsMainLanguage}}{%
		\usepackage[english]{varioref} % Intelligente Querverweise
}{%
		\usepackage[ngerman]{varioref} % Intelligente Querverweise
}

%%% Listen ===============================================================
%
%
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/paralist/paralist.pdf
% \usepackage{paralist}
%
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/enumitem/enumitem.pdf
% Better than 'paralist' and 'enumerate' because it uses a keyvalue interface !
% Do not load together with enumerate.
\IfPackageNotLoaded{enumerate}{
	\usepackage{enumitem}
}
%Verbesserter Abstand: später in MyPacakges.tex


%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/ncctools/doc/desclist.pdf
% Improved description environment
%\usepackage{declist}


\usepackage{blindtext}   %PW: Lorem ipsum deutsch.

% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% Pakete zum Zitieren
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

% Quotes =================================================================
%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/csquotes/csquotes.pdf
% Advanced features for clever quotations
\usepackage[%
   %autostyle=true,% the style of all quotation marks will be adapted
                     %%% to the document language as chosen by 'babel' or polyglossia. Option babel is deprecated
   babel,            % the style of all quotation marks will be adapted
                     % to the document language as chosen by 'babel'
   german=quotes,		% Styles of quotes in each language
   english=american, %british,
   french=guillemets
]{csquotes}   %% csquotes und pstool zusammen macht Probleme.
%\defineshorthand{"`}{\openautoquote}
%\defineshorthand{"'}{\closeautoquote}
%

%\defineshorthand{"`}{\guillemotright}
%\defineshorthand{"'}{\guillemotleft}
%%%Nicht unbedingt notwendig, aber klappt
%\defineshorthand{"´}{\guilsinglright}
%\defineshorthand{"*}{\guilsinglleft}


%% Listings Paket ------------------------------------------------------
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/listings/listings-1.3.pdf
 % for code listings
\ifxetex %Nutzung von XeLaTeX anstatt nur LaTeX
	\usepackage{listings} %ok bei XeLaTeX; bei LaTeX Probleme mit Umlauten bei UTF8-kodierten Dateien
\else
	\usepackage{listingsutf8} %Workaround, um UTF8-kodierte Listing-Dateien mit \lstinputlisting
	% einbinden zu können (kein Workaround für \lstinline, Environment lstlisting und
	% Environments, die durch \lstnewenvironment definiert sind.
	%Workaround für korrekte Interpretation der Umlaute auch bei lstlisting-Umgebung:
	\lstset{literate=%
		{ä}{{\"a}}1 {ë}{{\"e}}1 {ï}{{\"i}}1 {ö}{{\"o}}1 {ü}{{\"u}}1
		{Ä}{{\"A}}1 {Ë}{{\"E}}1 {Ï}{{\"I}}1 {Ö}{{\"O}}1 {Ü}{{\"U}}1
		{á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
		{Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1
		{à}{{\`a}}1 {è}{{\`e}}1 {ì}{{\`i}}1 {ò}{{\`o}}1 {ù}{{\`u}}1
		{À}{{\`A}}1 {È}{{\'E}}1 {Ì}{{\`I}}1 {Ò}{{\`O}}1 {Ù}{{\`U}}1
		{â}{{\^a}}1 {ê}{{\^e}}1 {î}{{\^i}}1 {ô}{{\^o}}1 {û}{{\^u}}1
		{Â}{{\^A}}1 {Ê}{{\^E}}1 {Î}{{\^I}}1 {Ô}{{\^O}}1 {Û}{{\^U}}1
		{œ}{{\oe}}1 {Œ}{{\OE}}1 {æ}{{\ae}}1 {Æ}{{\AE}}1 {ß}{{\ss}}1
		{ű}{{\H{u}}}1 {Ű}{{\H{U}}}1 {ő}{{\H{o}}}1 {Ő}{{\H{O}}}1
		{ç}{{\c c}}1 {Ç}{{\c C}}1
		{ã}{{\~a}}1 {å}{{\r a}}1 {Å}{{\r A}}1
		{ø}{{\o}}1 {€}{{\EUR}}1 {£}{{\pounds}}1
		{~}{{\textasciitilde}}1
	}

\fi
  \lstloadlanguages{% Check Dokumentation for further languages ...
         %[Visual]Basic
         %Pascal
         C,
         [Visual]C++,
         [ISO]C++
         %XML
         %HTML
 }

 \lstset{
         basicstyle=\small\ttfamily, % Standardschrift
         frame = single,             % Rahmen um Listings zeichnen
         %numbers=left,               % Ort der Zeilennummern (falls gewünscht, 
         %numberstyle=\tiny,          % Stil der Zeilennummern
         %xleftmargin=\marginparsep,  % Einrückung, damit die Zeilennummern innerhalb des Textrahmens stehen!
         %xleftmargin=\marginparsep,
         framesep=\mylistingframesep,
         framerule=\mylistingframerule,
         xleftmargin=\dimexpr\mylistingframesep+\mylistingframerule,
         xrightmargin=\dimexpr\mylistingframesep+\mylistingframerule,
         %stepnumber=1,               % Abstand zwischen den Zeilennummern
         %numbersep=5pt,              % Abstand der Nummern zum Text
         tabsize=2,                  % Groesse von Tabs
         extendedchars=true,         %
         breaklines=true,            % Zeilen werden Umgebrochen
         keywordstyle=\color{keywordcolor}\bfseries,
%         keywordstyle=[1]\textbf,    % Stil der Keywords
 %        keywordstyle=[2]\textbf,    %
 %        keywordstyle=[3]\textbf,    %
 %        keywordstyle=[4]\textbf,    %
         stringstyle=\color{stringcolor}, % Farbe der String
         showspaces=false,           % Leerzeichen anzeigen ?
         showtabs=false,             % Tabs anzeigen ?
         showstringspaces=false,      % Leerzeichen in Strings anzeigen ?
         commentstyle=\color{commentcolor},
         captionpos=b,
   			language=[Visual]C++
}
\lstdefinestyle{nonumbers}{numbers=none}

\lstnewenvironment{latex}[1][]{%
	\lstset{%
		language=[LaTeX]TeX,%
		morekeywords={%
			Acf,%
			lc,%
			acgen,%
			resizebox,%
			cref,%
			includegraphics,%
			toprule,%
			midrule,%
			bottomrule,%
			tikzsetnextfilename,%
			enquote,%
			myglossaryentry,%
			newglossaryentry,%
			newacronym,%
			longnewglossaryentry,%
			subfloat},%
		#1}%
}{}

\lstnewenvironment{java}[1][]{%
  \lstset{language=Java,#1}%
}{}

%% PW
% Weitere Algorithmenumgebungen: http://en.wikibooks.org/wiki/LaTeX/Algorithms_and_Pseudocode
 
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/examplep/eurotex_2005_examplep.pdf
% LaTeX Code und Ergebnis nebeneinander darstellen
%\usepackage{examplep}



%% Für rotierte Tabellen
\usepackage[figuresright]{rotating}


% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% figures and placement
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

%% Bilder und Graphiken ==================================================


%%% Doc: No Documentation
%\usepackage{latexrelease}     % wird wohl vom flafter gebraucht
%\usepackage{flafter}          % Floats immer erst nach der Referenz setzen  %% Erzeugt aber eine Warnung

% Defines a \FloatBarrier command, beyond which floats may not
% pass; useful, for example, to ensure all floats for a section
% appear before the next \section command.
\usepackage[
	section		% "\section" command will be redefined with "\FloatBarrier"
]{placeins}
%
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/subfig/subfig.pdf
% Incompatible: loads package capt-of. Loading of 'capt-of' afterwards will fail therefor
\usepackage{subfig} % Layout wird weiter unten festgelegt !

%%% Bilder von Text Umfliessen lassen : (empfehle wrapfig)
%
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/wrapfig/wrapfig.sty
\usepackage{wrapfig}	        % defines wrapfigure and wrapfloat
\setlength{\wrapoverhang}{\marginparwidth} % aeerlapp des Bildes ...
\addtolength{\wrapoverhang}{\marginparsep} % ... in den margin

%%% Doc: Documentation inside dtx Package
%\usepackage{floatflt}   	  % LaTeX2e Paket von 1996
                             % [rflt] - Standard float auf der rechten Seite

%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex209/contrib/picins/picins.doc
%\usepackage{picins}          % LaTeX 2.09 Paket von 1992. aber Layout kombatibel


%% Make float placement easier
%minimum fraction of floatpage that should have floats (default: 0.5)
\renewcommand{\floatpagefraction}{.5} % vorher: .75 / .5
%% minimum fraction of page for text (default: 0.2)
\renewcommand{\textfraction}{0}       % vorher: .1 / .2
%% maximum fraction of page for floats at top (default: 0.7)
\renewcommand{\topfraction}{1}        % vorher: .8 / .7
%% maximum fraction of page for floats at bottom (default: 0.3)
\renewcommand{\bottomfraction}{1}     % vorher: .5 / .3
%% maximum number of floats at top of page (default: 2)
\setcounter{topnumber}{3}              % vorher: 2
%% maximum number of floats at bottom of page (default: 1)
\setcounter{bottomnumber}{3}           % vorher: 1
%% maximum number of floats on a page (default: 3)
\setcounter{totalnumber}{5}            % vorher: 3

% Abstand zwischen zwei Absätzen
\setlength{\parskip}{\myparskip}

%% Abstand zwischen Gleitobjekten und dem darüber und darunter angeordneten Fließtext fest
\setlength{\intextsep}{\myintextsep}
\setlength{\floatsep}{\myfloatsep}
\setlength{\textfloatsep}{\mytextfloatsep}
%\setlength{\columnsep}{1em} % Abstand zum Text


\makeatletter
% Positionierung von Gleitumgebungen defaultmäßig auf htbp statt tbp setzen.
\renewcommand{\fps@figure}{htb}
\renewcommand{\fps@table}{htb}

%% set vertical float alignment for the only-float pages:
\ifthenelse{\boolean{SetFloatsVerticallyCentered}}%
{% to get the float to be centered on a floats-only page:
\setlength{\@fptop}{0pt plus 1fil}
\setlength{\@fpbot}{0pt plus 1fil}
}%
{% to get the figure/table be aligned at the top instead:
\setlength{\@fptop}{0pt}
\setlength{\@fpsep}{\myfloatsep}
\setlength{\@fpbot}{0pt plus 1fil}
}
\makeatother

%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/psfrag/pfgguide.pdf
% \usepackage{psfrag}	% Ersetzen von Zeichen in eps Bildern  % 1998
 				%Usage: \psfrag{tag}[posn][psposn][scale][rot]{LATEX text}
% \usepackage{psfragx}	% Extension for psfrag, not a replacement. Weiß aber nicht, ob's das bringt. Ersetzen von Zeichen in eps Bildern  %%PW Ist aber alt: Dez 2004
%\ifpdf
%\usepackage[%
%cleanup={}%
%%crop=pdfcrop,%  %%PW: Wenn falsch gecroppt wird, es aber den Fehler "Cannot call ghostscript (mgs)" gibt, liegt das daran, dass die mgs.exe die Umgebungsvariable MIKTEX_GS_LIB abfragt, statt der üblichen GS_LIB. Das kommt daher, dass Miktex-Ghostscript benutzt wird, das ein wenig anders ist. Abhilfe schafft die Umgebungsvariable so zu setzen:
%%process,% Wenn man die psfrag-Sachen etc. immer durchgenudelt haben will
%%%PW:  set MIKTEX_GS_LIB=c:\Programme\MiKTeX28\ghostscript\base;c:\Programme\MiKTeX28\fonts\
%%%PW  Pfade natürlich anpassen
%%mode=errorstop%nonstop%batch%
%,mode=nonstop%
%%latex-options=
%]%
%{pstool}  %von Zebb Prime, eigentlich ein pst-pdf Ersatz

%% pstool hat aber noch tolle Unterstützung für Matlab-Figures
%\fi




%%PW: TikZ
%% Braucht anscheinend eines der begrenzt verfügbaren TeX-\writes
%\usepackage{tikz}
%\usepackage{tikz-3dplot}

%%PW: Damit KOMAscript: parskip = absolute und relative keine TeX grouping errors provozieren.
%\makeatletter
%\def\pgfutil@selectfont{\KOMAoptions{parskip=absolute}\selectfont}
%\makeatother


\usepackage{overpic}

%% Diagramme mit LaTeX ===================================================
%

%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/pict2e/pict2e.pdf
% Neuimplementation der Picture Umgebung.
%
% The new package extends the existing LaTeX picture environment, using
% the familiar technique (cf. the graphics and color packages) of driver
% files.  The package documentation (pict2e.dtx) has a fair number of
% examples of use, showing where things are improved by comparison with
% the LaTeX picture environment.
% \usepackage{pict2e}

%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/curve2e/curve2e.pdf
% Extensions for package pict2e.
%\usepackage{curve2e}
%


% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% misc packages
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


\IfDraft{
  \usepackage{showidx}    % Indizierte Begriffe am Rand (Korrekturlesen)
}
% Erweitertes Paket zur Generierung von Stichwortverzeichnissen
\usepackage{imakeidx}
%\usepackage[options=-s preambel/IndexStyle.tex]{imakeidx} % use this if you want to use makeindex for sorting
%\usepackage[program=truexindy, options={--language german-din --codepage utf8 --module indexStyle}]{imakeidx} % use xindy for sorting
%\usepackage[truexindy, options={--language german-din --codepage utf8 --module indexStyle}]{imakeidx} % use xindy for sorting
%\usepackage[xindy]{imakeidx}
\indexsetup{level=\chapter*,toclevel=chapter*}

%% PW: nameref: Vielleicht hilfts was gegen die falschen Index-Hyperlinks
%% Nein, tut es nicht.
%%\usepackage{nameref}

%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/isodate/README
%%% Incompatible: draftcopy
% Tune the output format of dates.
%\usepackage{isodate}

%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/numprint/numprint.pdf
% Modify printing of numbers
%\usepackage{numprint}

%%MG: nach hyperref verschoben
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/nomencl/nomencl.pdf
%% Braucht anscheinend eines der begrenzt verfügbaren TeX-\writes
%\usepackage[%
%	german,
%	english
%]{nomencl}%[2005/09/22]

%%MG: nach hyperref verschoben
%\usepackage[
%%	footnote,	% Full names appear in the footnote
%%	smaller,		% Print acronym in smaller fontsize
%	printonlyused %
%]{acronym}

% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% verbatim packages
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/upquote/upquote.sty
%\usepackage{upquote} % Setzt "richtige" Quotes in verbatim-Umgebung

%%% Doc: No Documentation
% \usepackage{verbatim} %Reimplemntation of the original verbatim

%%% Doc: http://www.cs.brown.edu/system/software/latex/doc/fancyvrb.pdf
\usepackage{fancyvrb} % Superior Verbatim Class, allows usage of \verb in footnotes


% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% science packages
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

\usepackage{units}


% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% fancy packages
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

%%% Doc: No documentation - documented in 'The LaTeX Companion'
% \usepackage{fancybox}   % for shadowbox, ovalbox

%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/misc/framed.sty
% \usepackage{framed}
% \renewcommand\FrameCommand{\fcolorbox{black}{shadecolor}}



%% PW: War so von M. Pospiech
\makeatletter
\IfPackageLoaded{framed}{%
   \IfPackageLoaded{marginnote}{%
      \begingroup
         \g@addto@macro\framed{%
            \let\marginnoteleftadjust\FrameSep
            \let\marginnoterightadjust\FrameSep
         }
       \endgroup 
  }
}
\makeatother



%%% Doc: No documentation - documented in 'The LaTeX Companion'
% \usepackage{boxedminipage}

%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/lettrine/doc/lettrine.pdf
% Dropping capitals
% \usepackage{lettrine}

%% PW: 3D- und Film-Unterstützung für PDF
%\usepackage[%
%3D,%
%%draft,%
%%final,%
%]{movie15}


% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% layout packages
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

%%% Diverse Pakete und Einstellungen =====================================

%%% Doc: Documentation inside dtx file
% Mehere Text-Spalten
\usepackage{multicol}

%\nonfrenchspacing     % liefert extra Platz hinter Satzenden.
                       % Fuer deutschen Text standardmaessig ausgeschaltet!


\usepackage{ellipsis}  % >>Intelligente<< \dots

%% Zeilenabstand =========================================================
%
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/setspace/setspace.sty
\usepackage{setspace}
\setstretch{1.1}    % Aus der Datei Header.tex
%\onehalfspacing		% 1,5-facher Abstand
%\doublespacing		% 2-facher Abstand

\IfPackageLoaded{typearea}{% Wenn typearea geladen ist
	% hereafter load 'typearea' again
	\recalctypearea
}

%% Seitenlayout ==========================================================
%
% Layout laden um im Dokument den Befehl \layout nutzen zu koennen
%%% Doc: no documentation
%\usepackage[verbose]{layout}
%

% Layout mit 'geometry'
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/geometry/manual.pdf
\usepackage{geometry}
%% Angaben in der KIT-Vorlage:
%\usepackage[a5paper,headheight=1.5\baselineskip,top=25mm,lines=31,heightrounded=true,bindingoffset=15mm,textwidth=106mm]{geometry}
%\usepackage[a4paper,headheight=1.5\baselineskip,top=25mm,lines=46,heightrounded=true,bindingoffset=15mm,textwidth=160mm]{geometry}

\IfPackageLoaded{geometry}{%
\geometry{%
%%% Paper Groesse
   a5paper, % Andere a0paper, a1paper, a2paper, a3paper, , a5paper, a6paper,
            % b0paper, b1paper, b2paper, b3paper, b4paper, b5paper, b6paper
            % letterpaper, executivepaper, legalpaper
   %screen,  % a special paper size with (W,H) = (225mm,180mm)
   %paperwidth=,
   %paperheight=,
   %papersize=, %{ width , height }
   %landscape,  % Querformat
   portrait,    % Hochformat
%%% Koerper Groesse
   %hscale=0.7,      % ratio of width of total body to \paperwidth
                  % hscale=0.8 is equivalent to width=0.8\paperwidth. (0.7 by default)
   %vscale=0.8,      % ratio of height of total body to \paperheight
                  % vscale=0.9 is equivalent to height=0.9\paperheight.
   %scale=,       % ratio of total body to the paper. scale={ h-scale , v-scale }
   %totalwidth=,    % width of total body % (Generally, width >= textwidth)
   %totalheight=,   % height of total body, excluding header and footer by default
   %total=,        % total={ width , height }
   %textwidth=,    % modifies \textwidth, the width of body
	 %textwidth=106mm, %KIT-Vorlage
	 %textwidth=\mytextwidth,
   %textheight=,   % modifies \textheight, the height of body
   %body=,        % { width , height } sets both \textwidth and \textheight of the body of page.
   %lines=,       % enables users to specify \textheight by the number of lines. 
   %lines=35,     % KIT-Vorlage für A5
   %lines=50,     % KIT-Vorlage für A4
   %includehead,  % includes the head of the page, \headheight and \headsep, into total body.
   %includefoot,  % includes the foot of the page, \footskip, into body.
   %includeheadfoot, % sets both includehead and includefoot to true
   %includemp,    % includes the margin notes, \marginparwidth and \marginparsep, into body
   %includeall,   % sets both includeheadfoot and includemp to true.
   %ignorehead,   % disregards the head of the page, headheight and headsep in determining vertical layout
   %ignorefoot,   % disregards the foot of page, footskip, in determining vertical layout
   %ignoreheadfoot, % sets both ignorehead and ignorefoot to true.
   %ignoremp,     % disregards the marginal notes in determining the horizontal margins
   %ignoreall,     % sets both ignoreheadfoot and ignoremp to true
   %heightrounded, % This option rounds \textheight to n-times (n: an integer) of \baselineskip
   %hdivide=,     % { left margin , width , right margin }
                  % Note that you should not specify all of the three parameters
   %vdivide=,     % { top margin , height , bottom margin }
   %divide=,      % ={A,B,C} %  is interpreted as hdivide={A,B,C} and vdivide={A,B,C}.
%%% Margin
   %left=,        % left margin (for oneside) or inner margin (for twoside) of total body
                  % alias: lmargin, inner
   inner=\myinner,  % 18mm
   %inner=2cm,     %
   %right=,       % right or outer margin of total body
                  % alias: rmargin outer
   outer=\myouter, % 15mm
	 %outer=4cm,     %
   %top=27mm,       % top margin of the page.
   %top=3cm,       % top margin of the page.
   top=\mytop,
                  % Alias : tmargin
	 %bottom=29mm,    % bottom margin of the page
   %bottom=4cm,    % bottom margin of the page
                  % Alias : bmargin
   %hmargin=,     % left and right margin. hmargin={ left margin , right margin }
   %vmargin=,     % top and bottom margin. vmargin={ top margin , bottom margin }
   %margin=,      % margin={A,B} is equivalent to hmargin={A,B} and vmargin={A,B}
   %hmarginratio, % horizontal margin ratio of left (inner) to right (outer).
   %vmarginratio, % vertical margin ratio of top to bottom.
   %marginratio,  % marginratio={ horizontal ratio , vertical ratio }
   %hcentering,   % sets auto-centering horizontally and is equivalent to hmarginratio=1:1
   %vcentering,   % sets auto-centering vertically and is equivalent to vmarginratio=1:1
   %centering,    % sets auto-centering and is equivalent to marginratio=1:1
   twoside,       % switches on twoside mode with left and right margins swapped on verso pages.
   %asymmetric,   % implements a twosided layout in which margins are not swapped on alternate pages
                  % and in which the marginal notes stay always on the same side.
   %bindingoffset=5mm,  % removes a specified space for binding
   bindingoffset=\mybindingoffset,
%%% Dimensionen
   %headheight=,  % Alias:  head
   headheight=\myheadheight,
   %headsep=,     % separation between header and text
   headsep=\myheadsep,
   %footskip=,    % distance separation between baseline of last line of text and baseline of footer
   footskip=\myfootskip,
                  % Alias: foot
   %nohead,       % eliminates spaces for the head of the page
                  % equivalent to both \headheight=0pt and \headsep=0pt.
   %nofoot,       % eliminates spaces for the foot of the page
                  % equivalent to \footskip=0pt.
   %noheadfoot,   % equivalent to nohead and nofoot.
   %footnotesep=, % changes the dimension \skip\footins,.
                  % separation between the bottom of text body and the top of footnote text
   marginparwidth=\mymarginparwidth, % width of the marginal notes
   %marginparwidth=0.15\paperwidth,%80pt, % width of the marginal notes
                  % Alias: marginpar
   %marginparsep=,% separation between body and marginal notes.
   marginparsep=\mymarginparsep,
   %nomarginpar,  % shrinks spaces for marginal notes to 0pt
   %columnsep=,   % the separation between two columns in twocolumn mode.
   %hoffset=,
   %voffset=,
   %offset=,      % horizontal and vertical offset.
                  % offset={ hoffset , voffset }
   %twocolumn,    % twocolumn=false denotes onecolumn
   %twoside,
   %textwidth=400pt,   % sets \textwidth directly
   %textheight=700pt,  % sets \textheight directly
   %reversemp,    % makes the marginal notes appear in the left (inner) margin
                  % Alias: reversemarginpar
}
} % Endif

% - Anzeigen des Layouts -
%%Rahmen um Elemente anzeigen
\ifthenelse{\boolean{showFrame}}{%
	\ifthenelse{\boolean{showGrid}}{%
		\usepackage[colorgrid,texcoord,gridunit=mm]{showframe}
	}{
		\IfElsePackageLoaded{geometry}{%
			\geometry{showframe}
		}{%
			\usepackage{showframe}
		}
	}
}


% Farben ================================================================
%
% Farbendefinition ausgelagert in die Datei ColorSettings.tex%% Aussehen der URLS======================================================

%fuer URL (nur wenn url geladen ist)
\IfDefined{urlstyle}{
  % URLs in gleicher Schrift wie der Fließtext statt in Schreibmaschinenschrift (default)
	\urlstyle{same} %tt %sf %rm
}

%% Kopf und Fusszeilen====================================================
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/koma-script/scrguide.pdf

%\usepackage[%
   %% headtopline,
   %% plainheadtopline,
   %% headsepline,
   %% plainheadsepline,
   %% footsepline,
   %% plainfootsepline,
   %% footbotline,
   %% plainfootbotline,
   %% ilines,
   %% clines,
   %% olines,
	 %%headinclude,          % deprectated
	 %% headexclude,
	 %% footinclude,         % Hilft gegen die zu tief hängenden Seitenzahlen!  % deprectated
	 %% footexclude,
   %automark,              % automatische Aktualisierung der Kolumnentitel
   %% autooneside,         % ignore optional argument in automark at oneside
   %komastyle,             % Stil von Koma Script
   %% standardstyle,       % Stil der Standardklassen
   %% markuppercase,       % Grossbuchstaben erzwingen
   %% markusedcase,        % vordefinierten Stil beibehalten
   %nouppercase,           % Grossbuchstaben verhindern
%]{scrpage2}

\usepackage[%
	automark,%          % automatische Aktualisierung der Kolumnentitel
	headsepline=0.4pt,%  % Horizontale linie zwischen Body und Header, 0.4 pt dick und (defaultmäßig) so lang wie der Text
	%footsepline,%       % Horizontale linie zwischen Body und Footer
	%plainheadsepline,% % Horizontale linie zwischen Body und Header auf leeren Seiten
	%plainfootsepline,% % Horizontale linie zwischen Body und Footer auf leeren Seiten
	markcase=noupper,%  % Grossbuchstaben verhindern
	autooneside=false%
]{scrlayer-scrpage}


\IfElseChapterDefined{%  %werden erst durch scrpage2 definiert
   \pagestyle{scrheadings} % Seite mit Headern
}{
   \pagestyle{scrplain} % Seiten ohne Header
}
%\pagestyle{empty} % Seiten ohne Header
%
% loescht voreingestellte Stile
\clearscrheadings
\clearscrplain

% Angezeigte Abschnitte im Header
\IfElseChapterDefined{%Beim Buch und Report (Kapitel als Gliederungsebene vorhanden):
	 % Zunächst dafür sorgen, dass beidseitig Kapitelname (Chapter) angezeigt wird
	 \ohead{\headmark} % Oben außen: Setzt Kapitel und Section automatisch
   \automark[chapter]{chapter} %[rechts]{links}
   % sofern eine Section vorhanden, rechts ihren Namen anzeigen, ansonsten Kapitelnamen stehen lassen
   \automark*[section]{} %[rechts]{links leer = nichts ändern}
   %% Rechts Section, links Subsection. Falls keine Subsection vorhnanden, leer lassen
   %%\automark[section]{chapter} %[rechts]{links}
	 % Unten aussen: Seitenzahl
   \ofoot[\pagemark]{\pagemark}
}{%Beim Article (Höchste Gliederungsebene ist Section):
   % Zunächst dafür sorgen, dass beidseitig Kapitelname (Chapter) angezeigt wird
   \automark[section]{section} %[rechts]{links}
   % sofern eine Subection vorhanden, rechts ihren Namen anzeigen, ansonsten Section stehen lassen
   \automark*[subsection]{section} %[rechts]{links leer = nichts ändern}
   %% Rechts Section, links Subsection. Falls keine Subsection vorhnanden, leer lassen
   %%\automark[subsection]{section} %[rechts]{links}
	 % Setzt Seitenzahlen auf Kapitelstartseiten in die Mitte (cfoot) 
   \cfoot[\pagemark]{\pagemark} % war cfoot =  Mitte unten: Seitenzahlen bei plain
}
%
% Linien (moegliche Kombination mit Breiten)
\IfChapterDefined{
   %\setheadtopline{}     % modifiziert die Parameter fuer die Linie ueber dem
   							  %	 Seitenkopf
   %\setheadsepline{.4pt}[\color{black}] % Breite wird als Option des Pakets scrlayer-scrpage gesetzt
   \addtokomafont{headsepline}{\color{black}}
                         % modifiziert die Parameter fuer die Linie zwischen
                         % Kopf und Textkörper
   %\setfootsepline{}    % modifiziert die Parameter fuer die Linie zwischen
   							 % Text und Fuß
   %\setfootbotline{}    % modifiziert die Parameter fuer die Linie unter dem
   							 % Seitenfuss
}


%%%Die Einstellungen hier überprüfen!
% Groesse des Headers

% Breite von Kopf und Fusszeile einstellen
% \setheadwidth[Verschiebung]{Breite}
% \setfootwidth[Verschiebung]{Breite}
% mögliche Werte
% paper - die Breite des Papiers
% page - die Breite der Seite
% text - die Breite des Textbereichs
% textwithmarginpar - die Breite des Textbereichs inklusive dem Seitenrand
% head - die aktuelle Breite des Seitenkopfes
% foot - die aktuelle Breite des Seitenfusses
\setheadwidth[0pt]{text}
\setfootwidth[0pt]{text}

%%% PW: Typearea nach scrpage2 laden (scrguide.pdf), sonst werden Kopf-und Fußzeile nicht zur Satzspiegelberechnung einbezogen?!
% Layout mit 'typearea'
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/koma-script/scrguide.pdf
\IfPackageLoaded{typearea}{% Wenn typearea geladen ist
   \IfPackageNotLoaded{geometry}{% aber nicht geometry
      \typearea[current]{last}
      %%show border lines of the margins etc
      %\usepackage{showframe}
   }
}
% BCOR
%    current  % Satzspiegelberechnung mit dem aktuell gültigen BCOR-Wert erneut
%             % durchführen.
% DIV
%    calc     % Satzspiegelberechnung einschließlich Ermittlung eines guten
%             % DIV-Wertes erneut durchführen.
%    classic  % Satzspiegelberechnung nach dem
%             % mittelalterlichen Buchseitenkanon
%             % (Kreisberechnung) erneut durchführen.
%    current  % Satzspiegelberechnung mit dem aktuell gültigen DIV-Wert erneut
%             % durchführen.
%    default  % Satzspiegelberechnung mit dem Standardwert für das aktuelle
%             % Seitenformat und die aktuelle Schriftgröße erneut durchführen.
%             % Falls kein Standardwert existiert calc anwenden.
%    last     % Satzspiegelberechnung mit demselben DIV -Argument, das beim
%             % letzten Aufruf angegeben wurde, erneut durchführen

% darf erst nach allen KOMAoptions und recalctypearea und areaset usw. stehen. --> Direkt vor begin document:
% Abstand zwischen Textunterkante und Seitenzahl kleiner.
% Forderung des KSP-Verlages: mindestens 10mm bzw. 3 Zeilen
\setlength{\footskip}{\myfootskip}

%% Großzügigere Abstände zwischen den Wörtern, dafür weniger Worttrennungen:
%% Abstandsvergrößerung innerhalb einer Zeile bei unschönem Zeilenumbruch groß genug setzen
\setlength{\emergencystretch}{3em}


%% Fussnoten =============================================================
\deffootnote%
%   [0.8em]% width of marker
   {0.8em}% indentation (general)
   {0.8em}% indentation (par)
   {\makebox[0.8em][l]{\textsuperscript{\thefootnotemark}}}%
%
%\addtolength{\skip\footins}{2\baselineskip} % Abstand Text <-> Fussnote
%\addtolength{\skip\footins}{\baselineskip}

\setlength{\dimen\footins}{10\baselineskip} % Beschraenkt den Platz von Fussnoten auf 10 Zeilen

\interfootnotelinepenalty=10000 % Verhindert das Fortsetzen von
                                % Fussnoten auf der gegenüberligenden Seite
%%%% Hurenkinder und Schusterjungen vermeiden
% Schusterjungen (einzelne Zeile unten auf der Seite) unterdrücken:
\clubpenalty=10000 % Alter Wert: 9000
% Hurenkinder (einzelne Zeile oben auf der Seite) unterdrücken
\widowpenalty=10000 % Alter Wert: 9000
% Trennung zwischen Text und Formel
\displaywidowpenalty=9000 % Alter Wert: 9000
% Silbentrennung zwischen zwei Seiten verhindern:
\brokenpenalty=10000
%% Schriften (Sections )==================================================



% -- Koma Schriften --

%% Forderung des KSP-Verlages: Anfang der Überschriften auslinieren
\renewcommand*{\chapterformat}{\makebox[12mm][l]{\thechapter\autodot}}
\renewcommand*{\sectionformat}{\makebox[12mm][l]{\thesection\autodot}}
\renewcommand*{\subsectionformat}{\makebox[12mm][l]{\thesubsection\autodot}}

%% Forderung des KSP-Verlages: Alle Überschriften fett!
%% Forderung des KSP-Verlagesg: Überschriften nicht in Blocksatz, sondern in Flattersatz
%% Forderung des KSP-Verlages: keine Worttrennung in Überschriften, daher \raggedright statt \RaggedRight
%\newcommand\SectionFontStyle{\bfseries \sffamily \RaggedRight}
%\newcommand\SectionFontStyle{\bfseries \rmfamily \RaggedRight}
\newcommand\SectionFontStyle{\raggedright \bfseries \rmfamily}

% Alle Überschriften fett, serifenlos und in Flattersatz ohne Silbentrennung
\setkomafont{sectioning}{\SectionFontStyle}

\IfPartDefined{
	\setkomafont{part}{\SectionFontStyle}
	\addtokomafont{part}{\huge}
	%% Eintrag für die Parts im Inhaltsverzeichnis:
	%\setkomafont{partentry}{\bfseries\large\raggedright}
	%\addtokomafont{partentrydots}{\bfseries}
}

\IfChapterDefined{%
	\setkomafont{chapter}{\LARGE\SectionFontStyle}    % Chapter
	%\setkomafont{chapter}{\huge\SectionFontStyle}    % Chapter
	%Zeilenabstand in mehrzeiligen Überschriften nicht entsprechend
	%dem setstretch-Angabe für den normalen Text vergrößern!
	\addtokomafont{chapter}{\linespread{1}\selectfont}
	%\addtokomafont{chapter}{\singlespacing\selectfont}
	% Kapitel-Einträge im Inhaltsverzeichnis:
	%\setkomafont{chapterentry}{\usekomafont{sectioning}\bfseries}
	\setkomafont{chapterentry}{\bfseries\raggedright} %Eintrag im Inhaltsverzeichnis
	\addtokomafont{chapterentrydots}{\bfseries} % Pünktchen zwischen dem Eintrag und Seitenzahl
}

\setkomafont{section}{\usekomafont{sectioning}}
%Zeilenabstand in mehrzeiligen Überschriften nicht entsprechend
%dem setstretch-Angabe für den normalen Text vergrößern!
\addtokomafont{section}{\Large\linespread{1}\selectfont}
%\setkomafont{sectionentry}{\usekomafont{sectioning}}
\setkomafont{subsection}{\usekomafont{sectioning}}
\addtokomafont{subsection}{\large\linespread{1}\selectfont}
\setkomafont{subsubsection}{\usekomafont{sectioning}}
%\setkomafont{subsubsection}{\bfseries}
\setkomafont{paragraph}{\usekomafont{sectioning}}
%\setkomafont{paragraph}{\bfseries \itshape}
\addtokomafont{paragraph}{\bfseries \itshape}
%\setkomafont{subparagraph}{\usekomafont{sectioning}}
\addtokomafont{subparagraph}{\itshape}

\setkomafont{descriptionlabel}{\itshape}


%% Forderung des KSP-Verlages: Kopfzeilen kleiner als der Fließtext
%\setkomafont{pageheadfoot}{\normalfont\normalcolor\small\sffamily}%warum eingentlich sans?
\setkomafont{pageheadfoot}{\normalfont\normalcolor\footnotesize}
%% Forderung des KSP-Verlages: Kopfzeilen in der gleichen Größe wie der Fließtext, nicht fett
\setkomafont{pagenumber}{\normalfont\normalcolor\normalsize}


%% UeberSchriften (Chapter und Sections) =================================

\addtokomafont{sectioning}{\color{sectioncolor}} % Farbe der Ueberschriften
\IfChapterDefined{%
	\addtokomafont{chapter}{\color{sectioncolor}} % Farbe der Ueberschriften
}
%% Forderung des KSP-Verlages: keine Worttrennung in Überschriften, daher \raggedright statt \RaggedRight
\renewcommand*{\raggedsection}{\raggedright} % Titelzeile linksbuendig, haengend
%% indirekte Auswirkung auch auf \raggedchapter

%%% Adjust space above and below chapter titles, section titles etc.

\RedeclareSectionCommand[%
%%beforeskip=-10pt plus -2pt minus -1pt,%
%%afterskip=1sp plus -1sp minus 1sp%
beforeskip=\mychapterbeforeskip,%
afterskip=\mychapterafterskip%
]{chapter}

\RedeclareSectionCommand[%
%beforeskip=-10pt plus -2pt minus -1pt,%
%afterskip=1sp plus -1sp minus 1sp%
beforeskip=\mysectionbeforeskip,%
afterskip=\mysectionafterskip%
]{section}

\RedeclareSectionCommand[%
%beforeskip=-10pt plus -2pt minus -1pt,%
%afterskip=1sp plus -1sp minus 1sp%
beforeskip=\mysubsectionbeforeskip,%
afterskip=\mysubsectionafterskip%
]{subsection}

\RedeclareSectionCommand[%
%beforeskip=-10pt plus -2pt minus -1pt,%
%afterskip=1sp plus -1sp minus 1sp%
beforeskip=\mysubsubsectionbeforeskip,%
afterskip=\mysubsubsectionafterskip%
]{subsubsection}

\RedeclareSectionCommand[%
%beforeskip=-10pt plus -2pt minus -1pt,%
%afterskip=1sp plus -1sp minus 1sp%
beforeskip=\myparagraphbeforeskip,%
afterskip=\myparagraphafterskip%
]{paragraph}

% -- Ueberschriften komlett Umdefinieren --
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/titlesec/titlesec.pdf
% Wird gebraucht um die Chapter-Überschrift schön zu machen
% Inkompatibel mit biblatex und Koma-Skript
%\usepackage{titlesec}
%%PW aus http://texblog.net/latex-archive/layout/fancy-chapter-tikz/
%\usepackage[explicit]{titlesec}
%% paragraphs sehen aus wie subsubsubsections
%\titleformat{\paragraph}[hang]{\bf}{\thetitle\quad}{0pt}{}						
%\titlespacing{\paragraph}{0pt}{1em}{0.5em} 
%
%% subparagraphs sehen aus wie vorher paragraphs
%\titleformat{\subparagraph}[runin]{\bf}{}{0.5em}{}
%\titlespacing{\subparagraph}{0pt}{1em}{1em}

% -- Section Aussehen veraendern --
% --------------------------------
%% -> Section mit Unterstrich
% \titleformat{\section}
%   [hang]%[frame]display
%   {\usekomafont{sectioning}\Large}
%  {\thesection}
%   {6pt}
%   {}
%   [\titlerule \vspace{0.5\baselineskip}]
% --------------------------------

% -- Chapter Aussehen veraendern --
% --------------------------------
%--> Box mit (Kapitel + Nummer ) +  Name
% \titleformat{\chapter}[display]     % {command}[shape]
%   {\usekomafont{chapter}\filcenter} % format
%   {                                 % label
%   {\fcolorbox{black}{shadecolor}{
%   {\huge\chaptertitlename\mbox{\hspace{1mm}}\thechapter}
%   }}}
%   {1pc}                             % sep (from chapternumber)
%   {\vspace{1pc}}                    % {before}[after] (before chaptertitle and after)
% --------------------------------
%--> Kapitel + Nummer + Trennlinie + Name + Trennlinie
%\titleformat{\chapter}[display]	% {command}[shape]
%  {\usekomafont{chapter}\Large \color{black}}	% format
%  {   										% label
%  \LARGE\MakeUppercase{\chaptertitlename} \Huge \thechapter \filright%
%  }%}
%  {1pt}										% sep (from chapternumber)
%  {\titlerule \vspace{0.9pc} \filright \color{sectioncolor}}   % {before}[after] (before chaptertitle and after)
%  [\color{black} \vspace{0.9pc} \filright {\titlerule}]


%%% Doc: No documentation
% Indent first paragraph after section header
% \usepackage{indentfirst}


%for images at the title page
\usepackage{wallpaper}
%\setlength{\wpYoffset}{0cm} %negative Werte verschieben nach unten
%\addtolength{\wpXoffset}{0.0cm}







%% Captions (Schrift, Aussehen) ==========================================

% % Folgende Befehle werden durch das Paket caption und subfig ersetzt !
% \setcapindent{1em} % Einrueckung der Beschriftung
% \setkomafont{caption}{\color{black}\small\sffamily\RaggedRight}  % Schrift fuer Caption
% \setkomafont{captionlabel}{\color{black}\small}   % Schrift fuer 'Abbildung' usw.

%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/caption/caption.pdf
\usepackage{caption}
%\usepackage[aboveskip=\myaboveskip,belowskip=\mybelowskip]{caption}
% Caption fuer nicht fliessende Umgebungen
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/misc/capt-of.sty
\IfPackageNotLoaded{caption}{
	\usepackage{capt-of} % only load when caption is not loaded. Otherwise compiling will fail.
	%Usage: \captionof{table}[short Titel]{long Titel}
}
%

%Funktioniert auch nicht...
%\setlength{\abovecaptionskip}{\mycaptionskip}
%\setlength{\belowcaptionskip}{\mycaptionskip}
%\setlength{\subfigtopskip}{0pt}
%\setlength{\subfigbottomskip}{pt}

% Aussehen der Captions
\captionsetup[figure]{
   margin = 0pt,
   aboveskip = \myaboveskip,
   belowskip = \mybelowskip,
   captionskip = \mycaptionskip,
   %skip = \mycaptionskip,
   font = {footnotesize,rm},
   labelfont = {footnotesize,bf},
   %format = plain, % oder 'hang'
   format = hang, %zweite und weitere Zeilen einrücken (an die erste ausrichten)
   indention = 0em,  % Einruecken der Beschriftung
   labelsep = colon, %period, space, quad, newline
   %justification = RaggedRight, % Falettersatz
   %justification = centering, % zentriert
   justification = justified, % Blocksatz
   singlelinecheck = true, % false (true=bei einer Zeile immer zentrieren)
   position = bottom %top
}
\captionsetup[table]{
   margin = 0pt,
   aboveskip = \myaboveskip,
   belowskip = \mybelowskip,
   captionskip = \mycaptionskip,
   %skip = \mycaptionskip,
   font = {footnotesize,rm},
   labelfont = {footnotesize,bf},
   %format = plain, % oder 'hang'
   format = hang, %zweite und weitere Zeilen einrücken (an die erste ausrichten)
   indention = 0em,  % Einruecken der Beschriftung
   labelsep = colon, %period, space, quad, newline
   %justification = RaggedRight, % Falettersatz
   %justification = centering, % zentriert
   justification = justified, % Blocksatz
   singlelinecheck = true, % false (true=bei einer Zeile immer zentrieren)
   position = top %bottom
}
\captionsetup[lstlisting]{
   margin = 0pt,
   aboveskip = \myaboveskip,
   belowskip = \mybelowskip,
   captionskip = \mycaptionskip,
   skip = \mycaptionskip,
   font = {footnotesize,rm},
   labelfont = {footnotesize,bf},
   %format = plain, % oder 'hang'
   format = hang, %zweite und weitere Zeilen einrücken (an die erste ausrichten)
   indention = 0em,  % Einruecken der Beschriftung
   labelsep = colon, %period, space, quad, newline
   %justification = RaggedRight, % Falettersatz
   %justification = centering, % zentriert
   justification = justified, % Blocksatz
   singlelinecheck = true, % false (true=bei einer Zeile immer zentrieren)
   position = bottom %top
}
%%% Bugfix Workaround
\DeclareCaptionOption{parskip}[]{}
\DeclareCaptionOption{parindent}[]{}

% Aussehen der Captions fuer subfigures (subfig-Paket)
\IfPackageLoaded{subfig}{
 \captionsetup[subfloat]{%
   %margin = 10pt,
   margin = 5pt,
   %margin = 0pt,
   aboveskip = \myaboveskip,
   belowskip = \mybelowskip,
   farskip = 0pt, %Glue placed opposite the sub-float caption (default: 10pt)
   nearskip = 0pt, %Glue placed opposite the caption from the sub-float (default: 0pt)
   captionskip = \mysubcaptionskip, %Glue placed between the sub-float and the caption (default: 4pt)
   %skip = \mycaptionskip,
   %topadjust=0pt, %Extra glue added to 'captionskip' when above the sub-float (default: 0pt)
   font = {footnotesize,rm},
   labelfont = {footnotesize,bf},
   %format = plain, % oder 'hang'
   format = hang, %zweite und weitere Zeilen einrücken (an die erste ausrichten)
   indention = 0em,  % Einruecken der Beschriftung
   labelsep = space, %period, space, quad, newline
   %justification = RaggedRight, % Flattersatz, mit Silbentrennung
   justification = raggedright, % Flattersatz ohne Silbentrennung
   %justification = centering, % zentriert
   %justification = justified, % Blocksatz
   singlelinecheck = true, % false (true=bei einer Zeile immer zentrieren)
   position = bottom, %top
   labelformat = parens % simple, empty % Wie die Bezeichnung gesetzt wird
 }
}

% \numberwithin{figure}{chapter} %Befehl zum Kapitelweise Nummerieren der Bilder, setzt `amsmath' vorraus
% \numberwithin{table}{chapter}  %Befehl zum Kapitelweise Nummerieren der Tabellen, setzt `amsmath' vorraus

%for better aligning images and captions
% has to be loaded after call of \captionsetup
\usepackage{floatrow}
\floatsetup[table]{style=plain,capposition=TOP}

%% Inhaltsverzeichnis (Schrift, Aussehen) sowie weitere Verzeichnisse ====

%Für TODO-Liste:
\usepackage[subfigure,titles]{tocloft}

%Wird in der Datei settings.tex gesetzt
%\setcounter{secnumdepth}{2}    % Abbildungsnummerierung mit groesserer Tiefe
%\setcounter{tocdepth}{3}		 % Inhaltsverzeichnis mit groesserer Tiefe
%Fonts in Kapiteln und sections...
\renewcommand\cftchapfont{\normalsize\bfseries\raggedright}
\renewcommand\cftsecfont{\normalsize\raggedright}
\renewcommand\cftsubsecfont{\normalsize\raggedright}
%
% Gepunktete Verbindung zwischen den Kapiteleinträgen und korrespondierenden Seitenzahlen:
% funktioniert!
\renewcommand{\cftchapdotsep}{\cftdotsep}
\renewcommand{\cftchapleader}{\cftdotfill{\cftchapdotsep}}

% Seitenzahlen bei Part unterdrücken
\cftpagenumbersoff{part}

% Einzug im Abbildungsverzeichnis zu Null setzen
\renewcommand{\cftfigindent}{0cm}
% Einzug im Tabellenverzeichnis zu Null setzen
\renewcommand{\cfttabindent}{0cm}

%\usepackage[tocgraduated]{tocstyle}
%\usetocstyle{allwithdot}

%Abstand zwischen Text und Seitenzahlen im Inhaltsverzeichnis vergrößern:
%\cftsetpnumwidth{2em}
%\cftsetrmarg{2.5em}

%% Flattersatz ohne Silbentrennung in Inhaltsverzeichnis
%(Lösung aus https://tex.stackexchange.com/questions/283730/left-align-toc-items-when-using-tableofcontents)
\makeatletter
\bgroup
\advance\@flushglue by \@tocrmarg
\xdef\@tocrmarg{\the\@flushglue}%
\egroup
\makeatother


% Workaround for correct setting of the list of listings taken from
% https://tex.stackexchange.com/questions/319372/customize-list-of-listings/319374#319374
\makeatletter
\AtBeginDocument{%
\renewcommand\lstlistoflistings{\bgroup
	\let\contentsname\lstlistlistingname
	%\def\l@lstlisting##1##2{\@dottedtocline{1}{1.5em}{2.3em}{\bfseries L ##1}{##2}}
	\def\l@lstlisting##1##2{\@dottedtocline{1}{0em}{2.3em}{##1}{##2}}
	\let\lst@temp\@starttoc \def\@starttoc##1{\lst@temp{lol}}%
	\tableofcontents 
	\addcontentsline{toc}{chapter}{\lstlistlistingname} % <-- diese Zeile selbst hinzugefügt
	\egroup}
}
\makeatother

%% Workaround for correct setting of the list of listings taken from
%% https://www.mrunix.de/forums/showthread.php?56028-List-of-Listings
%% (hat nicht funktioniert):
%\makeatletter
%\renewcommand{\l@lstlisting}[2]{\@dottedtocline{1}{0em}{2.3em}{#1}{#2}}
%\makeatother


% Inhalte von List of Figures
\IfPackageLoaded{subfig}{
	\setcounter{lofdepth}{1}  %1 = nur figures, 2 = figures + subfigures
}


\usepackage{here}

%% PW
%% geht nur grau
\ifthenelse{\boolean{printMuster}}%
{\usepackage{draftwatermark}%
\SetWatermarkText{\TransMuster}}{}


%% PW: Todo-Liste. Braucht anscheinend eines der begrenzt verfügbaren TeX-\writes
\ifthenelse{\boolean{showTODOs}}{%
	\usepackage[textsize=footnotesize,ngerman,colorinlistoftodos]{todonotes}
}{%
	\usepackage[disable]{todonotes}
}
% -------------------------------------------------------

% Aussehen des Inhaltsverzeichnisses: tocloft
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/tocloft/tocloft.pdf
%% Laden mit Option subfigure in Abhaengigkeit vom Paket subfigure und subfig
% \IfElsePackageLoaded{subfig}
% 	% IF subfig
% 	{\usepackage[subfigure]{tocloft}}{
% 	% ELSE
% 	\IfElsePackageLoaded{subfigure}
% 		% IF subfigure
% 		{\usepackage[subfigure]{tocloft}}
% 	   % Else (No subfig nor subfigure)
% 		{\usepackage{tocloft}}
% 	}
%
% %TOCLOFT zerstoert Layout der Ueberschriften von TOC, LOT, LOF
% \IfPackageLoaded{tocloft}{
% %
% %%%% Layout Matthias Pospiech (alles serifenlos)
% \IfChapterDefined{%
% 	\renewcommand{\cftchappagefont}{\bfseries\sffamily}  % Kapitel Seiten Schrift
% 	\renewcommand{\cftchapfont}{\bfseries\sffamily}      % Kapitel Schrift
% }
% \renewcommand{\cftsecpagefont}{\sffamily}            % Section Seiten Schrift
% \renewcommand{\cftsubsecpagefont}{\sffamily}         % Subsectin Seiten Schrift
% \renewcommand{\cftsecfont}{\sffamily}                % Section Schrift
% \renewcommand{\cftsubsecfont}{\sffamily}             % Subsection Schrift
%
% %%%% Layout aus Typokurz:
% % % Seitenzahlen direkt hinter TOC-Eintrag:
% % % Ebene \chapter
% % \renewcommand{\cftchapleader}{}
% % \renewcommand{\cftchapafterpnum}{\cftparfillskip}
% % % Ebene \section
% % \renewcommand{\cftsecleader}{}
% % \renewcommand{\cftsecafterpnum}{\cftparfillskip}
% % % Ebene \subsection
% % \renewcommand{\cftsubsecleader}{}
% % \renewcommand{\cftsubsecafterpnum}{\cftparfillskip}
% % % Abstaende vor Eintraegen im TOC verkleinern
% % \setlength{\cftbeforesecskip}{.4\baselineskip}
% % \setlength{\cftbeforesubsecskip}{.1\baselineskip}
%
% % wenn subsubsections unnumeriert:
% % - Einzug der ersten Zeile manuell vergrößern
% % - zusätzlichen Einzug der nachfolgenden Zeilen 
% %   (bei einem eventuellen Zeilenumbruch) entfernen
% % (Zahlen aus der Dokumentation zu tocloft-Pakage):
%\setlength{\cftsubsubsecindent}{10.0em} %normalerweise: {7.0em}
%\setlength{\cftsubsubsecnumwidth}{0em} %normalerweise: {4.1em}
% }
% % Ende tocloft Einstellungen --------------

%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/ms/multitoc.dvi
% TOC in mehreren Spalten setzen
%\usepackage[toc]{multitoc}

% -------------------------

%%Schriften fuer Minitoc (Inhaltsverzeichnis vor jedem Kapitel)
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/minitoc/minitoc.pdf
%\IfElseChapterDefined{%
% \usepackage{minitoc}
% \setlength{\mtcindent}{0em} % default: 24pt
% \setcounter{minitocdepth}{2}
% \setlength{\mtcskipamount}{\bigskipamount}
% \mtcsettitlefont{minitoc}{\normalsize\SectionFontStyle}
% \mtcsetfont{minitoc}{*}{\small\SectionFontStyle} %\color{textcolor}
% \mtcsetfont{minitoc}{section}{\small\SectionFontStyle}
% \mtcsetfont{minitoc}{subsection}{\small\SectionFontStyle}
% \mtcsetfont{minitoc}{subsubsection}{\small\SectionFontStyle}
%}{
% \usepackage{minitoc}
% \setlength{\stcindent}{0pt} %default
% \setcounter{secttocdepth}{2} %default
% \mtcsettitlefont{secttoc}{\SectionFontStyle}
% \mtcsetfont{secttoc}{*}{\small\SectionFontStyle}%
% \mtcsetfont{secttoc}{subsection}{\small\SectionFontStyle}
% \mtcsetfont{secttoc}{subsubsection}{\small\SectionFontStyle}
%}

% Packages that MUST be loaded before minitoc !
% hyperref, caption, sectsty, varsects, fncychap, hangcaption, quotchap, romannum, sfheaders, alnumsec, captcont


%% Index & Co. ===========================================================
% gibts dafuer noch eine sauberere Loesung ?
%%%%%%%% Index zweispaltig %%%%%%%
% \makeatletter
% \renewenvironment{theindex}{%
% \setlength{\columnsep}{2em}
% \begin{multicols}{2}[\section*{\indexname}]
% \parindent\z@
% \parskip\z@ \@plus .3\p@\relax
% \let\item\@idxitem}%
% {\end{multicols}\clearpage}
% \makeatother
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%% PW: idxlayout. Layout des Stichwortverzeichnisses (Index) verändern.
%\usepackage{idxlayout}

%% PW: glossaries.
%% Nach hyperref laden!!
%% Mehrere Verzeichnisse erstellen. Perl ist erwünscht, aber nicht zwingend. Bequemer ists mit.
%% Jedenfalls ist glossaries etwas umfangreicher und die Einträge zu erstellen hat etwas kompliziertere Syntax. z.B.:
%% \newglossaryentry{oesophagus}{name=\oe sophagus, description={canal from mouth to stomach}, plural=\oe sophagi, sort=oesophagus}
%% Mehr Infos, Tips und Anleitung zum Paket unter: http://www.mrunix.de/forums/showthread.php?t=68892
%% Glossaries Doku hat 260 Seiten...
%\usepackage{glossaries}


% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% PDF related packages
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

%%%%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/microtype/microtype.pdf
%%%%%% Optischer Randausgleich mit pdfTeX
\usepackage{microtype}
\microtypesetup{%
%	protrusion=true,
	protrusion=false,
}
\ifpdf
\microtypesetup{
	expansion=true, % better typography, but with much larger PDF file. --> mit pdfTeX 1.40 nicht mehr
%	expansion=false,
%	protrusion=true,
%	protrusion=false,
	kerning=true,
%	spacing=true,			%%stellt bei rechtsbündigem Satz manchmal Probleme dar (demo.tex, "`In id augue"', Rechtsbündig Ende)
%	tracking=false,   % >= pdfTeX 1.40.04
%	tracking=alltext,  % without specifying further: default expansion by 0.1 em
% tracking=true,   % >= pdfTeX 1.40.04
%	letterspace=20,  %for tracking. Leichte Sperrung,besonders bei Kapitälchen
%letterspace=-15,  %for tracking. %funzt mit tracking=alltext. Bereich von -1000 bis 1000 Teile von 1 em  % Für kpfonts sind -5 bis -10 ganz gut
%	letterspace= 5,  %for tracking. von -1000 bis 1000 Teile von 1 em  % Für Palatino
}
%\DeclareMicrotypeSet{pwtext}
   %{ encoding = {OT1,T1,T2A,LY1,OT4,QX,T5},
   %
     %family   = {rm*,sf*},
     %series   = {md*},
     %size     = {normalsize,footnotesize,small,large}
   %}
%was passiert hier? Ist das nötig?
\SetTracking[spacing={100*,-300, }]{encoding = *, family = jkp, shape = sc}{100}
\SetTracking{ encoding = *, family = jkp}{ -200 }
\SetTracking{ encoding = *, family = jkpss}{ -100 }
 
\SetTracking{ encoding = *, family = jkpl}{ -1000 }
\SetTracking{ encoding = *, family = jkpss, shape = rm*}{ -2000 }
\SetTracking[ no ligatures = f ]{ family=jkpss, encoding = *, shape = sc}{ 1000 }
\SetTracking{ encoding = *, size = -small}{ 4}
\SetTracking{ encoding = *, size = Large-}{ -4 }
\fi

%\microtypecontext{spacing=nonfrench}



% Zeilen auf der Seite verteilen
%( Es wird kein Ausgleich des unteren Seitenrandes durch Dehnung der Absatzabstände durchgeführt.) 
\raggedbottom     % Variable Seitenhoehen zulassen



%% Use only instead of hyperref !
% \usepackage[%
%    %ref,     % verweist auf Abschnitte
%    pageref, % verweist auf Seiten
% ]{backref} % Links in BiB back to Citation page/section (can be loaded by hyperref too)


%%%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/hyperref/doc/manual.pdf
\usepackage[%
   unicode,%                %hinzugefügt, da Fehler bei Verwendung von XeLaTeX
   pdfencoding=auto,        %hinzugefügt, da Fehler bei Verwendung von XeLaTeX
%%   									 % rechts im PDF-Viewer
%%%pdfx%   pdfa=true,%
%%   %pdfpagelayout=SinglePage, % einseitige Darstellung
%]{hyperref}  %% Braucht auch ohne backref anscheinend eines der begrenzt verfügbaren TeX-\writes, mit backref dann zwei
%
%\usepackage{hyperref}
%
%%%%PW: pdfx lädt seinerseits hyperref
%%%%Optionen a-1b oder x-1a
%\usepackage[a-1b]{pdfx}
%
%\hypersetup{
   % Farben fuer die Links
   colorlinks=true,         % Links erhalten Farben statt Kaeten
   urlcolor=pdfurlcolor,    % \href{...}{...} external (URL)
   filecolor=pdffilecolor,  % \href{...} local file
   linkcolor=pdflinkcolor,  %\ref{...} and \pageref{...}
   citecolor=pdfcitecolor,  %
   % Links
   raiselinks=true,			 % calculate real height of the link
   breaklinks=true,              % Links überstehen Zeilenumbruch
%   backref=page,            % Backlinks im Literaturverzeichnis (section, slide, page, none)
%   pagebackref=true,        % Backlinks im Literaturverzeichnis mit Seitenangabe
   verbose,
   hyperindex=true,         % backlinkex index
   linktocpage=true,        % Inhaltsverzeichnis verlinkt Seiten
   hyperfootnotes=false,     % Keine Links auf Fussnoten
   % Bookmarks
   bookmarks=true,          % Erzeugung von Bookmarks fuer PDF-Viewer
   bookmarksopenlevel=1,    % Gliederungstiefe der Bookmarks
   bookmarksopen=true,      % Expandierte Untermenues in Bookmarks
   bookmarksnumbered=true,  % Nummerierung der Bookmarks
   bookmarkstype=toc,       % Art der Verzeichnisses
   bookmarksdepth=\mybookmarkdepth,        %Tiefe des Inhaltsverzeichnisses in den Lesezeichen anders setzen
   % Anchors
   plainpages=false,        % Anchors even on plain pages ?
   pageanchor=true,         % Pages are linkable
   % PDF Informationen
   pdfinfo={
		Title={\WorkTitle},             % Titel
		Author={\AuthorName},            % Autor
		Subject={\TypeOfThesis},
		Creator={XeLaTeX, hyperref, KOMA-Script}%
	 }, % Ersteller
   %pdfproducer={pdfeTeX 1.10b-2.1} %Produzent
   pdfdisplaydoctitle=true, % Dokumententitel statt Dateiname im Fenstertitel
   pdfstartview=FitH,       % Dokument wird Fit Width geaefnet
   pdfpagemode=UseOutlines, % Bookmarks im Viewer anzeigen
   pdfpagelabels=true,           % set PDF page labels
   %pdfpagelayout=TwoPageRight, % zweiseitige Darstellung: ungerade Seiten
   									 % rechts im PDF-Viewer
   pdfpagelayout=SinglePage, % einseitige Darstellung
%}
]{hyperref}

% (replaces the hyperref functionality regarding pdf bookmarks)
\usepackage{bookmark}

%% PW: Wegen "destination with the same identifier"
%% http://tex.stackexchange.com/questions/65182/cross-references-linking-to-wrong-equations-using-hyperref
%\renewcommand{\theHequation}{\theHsection.\equationgrouping\arabic{equation}}


% PW: für bbordermatrix mit eckigen Klammern
% Alternativ: klassische plainTeX \bordermatrix mit eckigen Klammern (Redefinition von Befehlen):
\usepackage{etoolbox}


%% Zeilenumbrüche in urls nach folgenden Zeichen
%\appto\UrlBreaks{\do\a\do\b\do\c\do\d\do\e\do\f\do\g\do\h\do\i\do\j\do\k\do\l\do\m\do\n\do\o\do\p\do\q\do\r\do\s\do\t\do\u\do\v\do\w\do\x\do\y\do\z\do\/\do\.}
%\PassOptionsToPackage{hyphens}{url}

%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/oberdiek/hypcap.pdf
% Links auf Gleitumgebungen springen nicht zur Beschriftung,
% sondern zum Anfang der Gleitumgebung
\IfPackageLoaded{hyperref}{%
	\usepackage[figure,table]{hypcap}
}


%%DIN1505
%%\usepackage[backref=true,backend=bibtex8,style=alphabetic,maxnames=10]{biblatex}
\usepackage[backend=biber,%
						style=alphabetic,%
						labelnumber,% zusätzlich labelnummer zur Verfügung stel
						defernumbers=true,%
						%maxnames=10,% Maximal 10 Autorennamen zulassen, wenn >10, dann lasse nur einen + et al. (ggf. änderbar mit  der Option "minnames"
						maxbibnames=10,%
						maxcitenames=1,%
						maxalphanames=1,% Anzahl der aufzuführenden Namen in Bib-Label
						%dashed=false,%will print recurring author/editor names instead of replacing them by a dash in case of authoryear, authortitle, and verbose bibliography styles)
						isbn=false,%die ISBN-Felder nicht drucken
						%doi=false,%
						%eprint=false,%
						block=none,
						%block=space,% Füge zusätzlichen horizontalen Raum zwischen den Einträgen hinzu.
						%block=par,% Beginne einen neuen Paragraphen für jeden Eintrag
						%block=nbpar,% Ähnlich der par-Option, aber verbietet Seitensprünge zwischen den Übergängen und innerhalb der Einträge.
						%block=ragged,% Fügt einen kleinen Strafraum ein, um Zeilenumbrüche an Blockgrenzen zu fördern und die Bibliografie rechts orientiert (Flattersatz) zu setzen
						backref=true%Entscheidet,ob die Endreferenzen (Seitenzahlen) in die Bibliografie geschrieben werden sollen. (default=false)
						]{biblatex}

%% Das "+"-Zeichen nach mehr als maxcitenames Authoren entfernen durch Umdefinieren von "labelalphaothers":
\renewcommand*{\labelalphaothers}{}

%% Reihenfolge umdrehen: Nachname, Vorname
%\DeclareNameAlias{default}{last-first} %deprecated
\DeclareNameAlias{default}{family-given}

%% Separator zwischen den Autornamen: Semikolon statt Komma
%\renewcommand*{\multinamedelim}{;\space}
\DeclareDelimFormat{multinamedelim}{\addsemicolon\space}

%% Separator vor dem letzten den Autornamen: ohne Komma vor dem "and" bei mehreren Authoren
%% da Komma den Nach- und Vornamen trennt
\renewcommand*{\finalnamedelim}{\space and\space}

%% Nach Autornamen: Doppelpunkt statt Punkt:
\renewcommand*{\labelnamepunct}{\addcolon\addspace}

%% Vergrößerung des hängenden Einzuges
%\setlength{\bibhang}{5em}
%\addtolength{\bibhang}{2em}


%% Nachnamen in Kapitälchen
\AtBeginBibliography{\renewcommand*{\mkbibnamefamily}[1]{\textsc{#1}}}

%% Titel: nicht kursiv
\DeclareFieldFormat{title}{{#1}}

%%% Hack, damit man mehrere Bibliografien mit verschiedenen Zitationsstilen hat:
\DeclareFieldFormat{labelnumberwidth}{\mkbibbrackets{#1}}

%% Mehrere Zitate in einer Klammer, aber Komma statt Semikolon:
\renewcommand*{\multicitedelim}{\addcomma\addspace}
%% Nicht mehrere Zitate in einer Klammer, sondern eine Klammer pro Zitat:
%\renewcommand*{\multicitedelim}{\bibclosebracket\addcomma\addspace\bibopenbracket}

%% Definition für die allgemeine Literaturliste
\defbibenvironment{bibliography}
  {\list
     {\printtext[labelalphawidth]{%
        \printfield{labelprefix}%
        \printfield{labelalpha}}}
     {\setlength{\labelwidth}{\labelalphawidth}%
      \setlength{\leftmargin}{\labelwidth}%
      \setlength{\labelsep}{\biblabelsep}%
      \addtolength{\leftmargin}{\labelsep}%
      %\setlength{\itemindent}{-\labelsep}%
      \setlength{\itemsep}{\bibitemsep}%
      \setlength{\parsep}{\bibparsep}%
      %\addtolength{\bibhang}{3em}%
      }%
      %% \hss für rechtsbündige Ausrichtung
      %\renewcommand*{\makelabel}[1]{\hss##1}}
      \renewcommand*{\makelabel}[1]{##1}}
  {\endlist}
  {\item}


%% Definition für die Liste eigener Publikationen
\defbibenvironment{bibliographyNUM}
  {\list
     {\printtext[labelnumberwidth]{%
        \printfield{labelprefix}%
        \printfield{labelnumber}}}
     {\setlength{\labelwidth}{\labelnumberwidth}%
      \setlength{\leftmargin}{\labelwidth}%
      \setlength{\labelsep}{\biblabelsep}%
      \addtolength{\leftmargin}{\labelsep}%
      %\setlength{\itemindent}{-\labelsep}%
      \setlength{\itemsep}{\bibitemsep}%
      \setlength{\parsep}{\bibparsep}%
      %\addtolength{\bibhang}{3em}%
      }%
      %% \hss für rechtsbündige Ausrichtung
      %\renewcommand*{\makelabel}[1]{\hss##1}}
      \renewcommand*{\makelabel}[1]{##1}}
  {\endlist}
  {\item}

%\IfPackageLoaded{backref}{
   %% % Change Layout of Backref
   %\renewcommand*{\backref}[1]{%
   	%% default interface
   	%% #1: backref list
   	%%
   	%% We want to use the alternative interface,
   	%% therefore the definition is empty here.
   %}%
   %\renewcommand*{\backrefalt}[4]{%
   	%% alternative interface
   	%% #1: number of distinct back references
   	%% #2: backref list with distinct entries
   	%% #3: number of back references including duplicates
   	%% #4: backref list including duplicates
   	%\mbox{(Referenced on %Zitiert auf %
   	%\ifnum#1=1 %
		  %page~% 
			%%Seite~%
	   %\else
		  %pages~%
   		%%Seiten~%
   	%\fi
   	%#2)}%
   %}
%}



\IfPackageLoaded{backref}%
{
\ifthenelse{\boolean{englishAsMainLanguage}}{%
	\def\backrefpagesname{pages}%
	\def\backrefsectionsname{sections}%
	\def\backrefsep{, }%
	\def\backreftwosep{ and~}%
	\def\backreflastsep{, and~}%
}{%
	\def\backrefpagesname{Seiten}%
	\def\backrefsectionsname{Abschnitte}%
	\def\backrefsep{, }%
	\def\backreftwosep{ und~}%
	\def\backreflastsep{ und~}%
}

   % % Change Layout of Backref
   \renewcommand*{\backref}[1]%
	{%
   	% default interface
   	% #1: backref list
   	%
   	% We want to use the alternative interface,
   	% therefore the definition is empty here.
  }%
  \renewcommand*{\backrefalt}[4]%
	{%
   	% alternative interface
   	% #1: number of distinct back references
   	% #2: backref list with distinct entries
   	% #3: number of back references including duplicates
   	% #4: backref list including duplicates
   	\ifnum#1=0 %
	  {}%
		\else%
		\hfill\mbox{%
   		\ifthenelse{\boolean{englishAsMainLanguage}}{p.~}{S.~}%%
			#2}%
   	\fi%
		}
 }


\usepackage{cleveref}
\ifthenelse{\boolean{englishAsMainLanguage}}{%
	\crefname{chapter}{Chapter}{Chapters}
	\crefname{section}{Section}{Sections}
	\crefname{subsection}{Section}{Sections}
	\crefname{figure}{Figure}{Figures}
	\crefname{table}{Table}{Tables}
	\crefname{listing}{Listing}{Listing}
	\crefname{appendix}{Appendix}{Appendixes}

	\crefname{theorem}{Theorem}{Theorems}
	\crefname{definition}{Definition}{Definitions}
	\crefname{lemma}{Lemma}{Lemmata}
	\crefname{corollary}{Korollar}{Korollars}
	\crefname{proposition}{Proposition}{Propositions}

	\newcommand{\crefpairconjunction}{ and }
	\newcommand{\crefmiddleconjunction}{, }
	\newcommand{\creflastconjunction}{ and }
	\newcommand{\crefpairgroupconjunction}{ as well as }
	\newcommand{\crefmiddlegroupconjunction}{, }
	\newcommand{\creflastgroupconjunction}{ as well as }
}{%
	\crefname{chapter}{Kapitel}{Kapitel}
	\crefname{section}{Abschnitt}{Abschnitte}
	\crefname{subsection}{Abschnitt}{Abschnitte}
	\crefname{figure}{Abbildung}{Abbildungen}
	\crefname{table}{Tabelle}{Tabellen}
	\crefname{listing}{Listing}{Listing}
	\crefname{appendix}{Anhang}{Anhänge}

	\crefname{theorem}{Satz}{Sätze}
	\crefname{definition}{Definition}{Definitionen}
	\crefname{lemma}{Lemma}{Lemmata}
	\crefname{corollary}{Korollar}{Korollare}
	\crefname{proposition}{Proposition}{Propositionen}

	\newcommand{\crefpairconjunction}{ und }
	\newcommand{\crefmiddleconjunction}{, }
	\newcommand{\creflastconjunction}{ und }
	\newcommand{\crefpairgroupconjunction}{ sowie }
	\newcommand{\crefmiddlegroupconjunction}{, }
	\newcommand{\creflastgroupconjunction}{ sowie }
}


%% PW: ein paar Klimmzüge wegen der Raute statt Gleichheitszeichen für ps2pdf unter Windows.
\ifwindows
\ifxetex
%XeLaTeX unter Windows: hier passiert nichts
%\usepackage[cleanup={},mode=nonstop]{pstool}
\else
%pdfLaTeX unter Windows:
\usepackage{pstool}
\begingroup
\makeatletter
\catcode`\#=11
    \gdef\pstool@bitmap@opts{%
      -dAutoFilterColorImages#false
      -dAutoFilterGrayImages#false %
      -dColorImageFilter#/FlateEncode %
      -dGrayImageFilter#/FlateEncode % space
      }
     \gdef\pstool@pspdf@opts{%
				-dPDFSETTINGS#/prepress %
				-dCompatibilityLevel#1.3 %
				-dEmbedAllFonts#true %
				-dSubsetFonts#true
			}
\makeatother
\endgroup
\fi
\else
%pdfLaTeX oder XeLaTeX unter Linux:
%hier gibt es zur Zeit einen Fehler im IOSB-Cluster
%\usepackage[ps2pdf-options={-dPDFSETTINGS=/prepress -dCompatibilityLevel=1.3 -dEmbedAllFonts=true -dSubsetFonts=true}]{pstool}
\fi
%\usepackage[cleanup={},mode=nonstop,ps2pdf-options={"-dPDFSETTINGS=/prepress"}]{pstool}
%%PW: ps2pdf-options={"-dPDFSETTINGS=/prepress"} sorgt für Einbettung der Base14-Schriften, was laut KIT-SP-Richtlinien erwünscht ist.
%% Braucht anscheinend zwei der begrenzt verfügbaren TeX-\writes: Eins für psfrag und eins für pstool
%\usepackage[cleanup={},mode=nonstop,ps2pdf-options={"-dPDFSETTINGS=/prepress" "-dCompatibilityLevel=1.3"},latex-options={-interaction=nonstopmode -max-print-line=120  --enable-write18}]{pstool}
%\usepackage[cleanup={},mode=nonstop,ps2pdf-options={"-dPDFSETTINGS\#/prepress" "-dCompatibilityLevel\#1.3"}]{pstool}
%\usepackage[cleanup={}]{pstool}





% Auch Abbildung und nicht nur die Nummer wird zum Link (abgeleitet
% aus Posting von Heiko Oberdiek (d09n5p$9md$1@news.BelWue.DE);
% Verwendung: In \abbvref{label} ist ein Beispiel dargestellt
\providecommand*{\figrefname}{Abbildung }
\newcommand*{\figref}[1]{%
  \hyperref[fig:#1]{\figrefname{}}\ref{fig:#1}%
}
% ebenso bei Tabellen
\providecommand*{\tabrefname}{Tabelle~}
\newcommand*{\tabref}[1]{%
  \hyperref[tab:#1]{\tabrefname{}}\ref{tab:#1}%
}
% und Abschnitten
\providecommand*{\secrefname}{Abschnitt }
\newcommand*{\secref}[1]{%
  \hyperref[sec:#1]{\secrefname{}}\ref{sec:#1}%
}
% und Kapiteln
\providecommand*{\chaprefname}{Kapitel~}
\newcommand*{\chapref}[1]{%
  \hyperref[chap:#1]{\chaprefname{}}\ref{chap:#1}%
}

%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/pdfpages/pdfpages.pdf
\usepackage{pdfpages} % Include pages from external PDF documents in LaTeX documents

%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/oberdiek/pdflscape.sty
%% PW: Wird gebraut, wenn LSfigure-Environment definiert wird (newcommands.tex)
%\usepackage{pdflscape} %  Querformat mit PDF
%
% Pakete Laden die nach Hyperref geladen werden sollen
\LoadPackagesNow % (ltxtable, tabularx)

% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% Zusätzliche Pakete
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/hyphenat/hyphenat.pdf
% According to documentation the font warnings can be ignored
%\usepackage[htt]{hyphenat} % enable hyphenation of typewriter text word (\textt).

%% Komprimierung von Bildern in PDF ausschalten
% \ifpdf
%    \pdfcompresslevel=0
% \fi



% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
% end of preambel
% ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
%\IfPackageLoaded{fancyvrb}{
%	\DefineShortVerb{\|} % Nur mit fancyvrb zusammen laden!
%}
\VerbatimFootnotes

%%% PW Muster quer drüber
%\ifthenelse{\boolean{printMuster}}%
%{\ifthenelse{\boolean{englishAsMainLanguage}}%
%{\makeatletter%
%\AddToShipoutPicture{%
            %\setlength{\@tempdimb}{.5\paperwidth}%
            %\setlength{\@tempdimc}{.5\paperheight}%
            %\setlength{\unitlength}{1pt}%
            %\put(\strip@pt\@tempdimb,\strip@pt\@tempdimc){%
        %\makebox(0,0){\rotatebox{45}{\textcolor[gray]{0.75}%
        %{\fontsize{6cm}{6cm}\selectfont{DRAFT}}}}%
            %}%
%}%
%\makeatother}%
%{\makeatletter%
%\AddToShipoutPicture{%
            %\setlength{\@tempdimb}{.5\paperwidth}%
            %\setlength{\@tempdimc}{.5\paperheight}%
            %\setlength{\unitlength}{1pt}%
            %\put(\strip@pt\@tempdimb,\strip@pt\@tempdimc){%
        %\makebox(0,0){\rotatebox{45}{\textcolor[gray]{0.75}%
        %{\fontsize{6cm}{6cm}\selectfont{MUSTER}}}}%
            %}%
%}%
%\makeatother}%
%}{}


%%%% PW
%%%% Scrhack macht float@addtolists-Warnung weg und verbessert Kompatibilität zu anderen Paketen
%%% Braucht anscheinend eines der begrenzt verfügbaren TeX-\writes :-(
%\usepackage[%
%%hyperref=false
%]{scrhack}

%%MG: von oben verschoben
%%% Doc: ftp://tug.ctan.org/pub/tex-archive/macros/latex/contrib/nomencl/nomencl.pdf
%% Braucht anscheinend eines der begrenzt verfügbaren TeX-\writes
%\usepackage[%
%	german,
%	english
%]{nomencl}%[2005/09/22]

%%MG: von oben verschoben
%\usepackage[
%%	footnote,	% Full names appear in the footnote
%%	smaller,		% Print acronym in smaller fontsize
%	printonlyused %
%]{acronym}


\IfPackageLoaded{minitoc}{\IfElseUnDefined{chapter}{\dosecttoc}{\dominitoc}}

% Auszufuehrende Befehle  ------------------------------------------------
%% Verschoben in Header.tex
%\IfDefined{makeindex}{\makeindex[options=-s preambel/IndexStyle.tex]}
%\IfDefined{makenomenclature}{\makenomenclature}
%\listfiles
%------------------------------------------------------------------------

\ifpdf
%% um Warnungen vom Typ "PDF inclusion: found PDF version 1.6, but at most version 1.5 allowed" zu unterdrücken
\pdfoptionpdfminorversion=6
%% Zur Vermeidung von Transparenzen Beschränkung auf PDF 1.3!
\pdfminorversion=3
%\pdfminorversion=5


\fi
